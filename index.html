<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Slope</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
}

canvas {
  display: block;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let ball = {
  x: canvas.width / 2,
  y: canvas.height - 100,
  radius: 15,
  speed: 5,
  dx: 0
};

let obstacles = [];
let score = 0;

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowLeft") ball.dx = -ball.speed;
  if (e.key === "ArrowRight") ball.dx = ball.speed;
});

document.addEventListener("keyup", () => {
  ball.dx = 0;
});

function spawnObstacle() {
  let width = 100 + Math.random() * 200;
  let x = Math.random() * (canvas.width - width);
  obstacles.push({
    x: x,
    y: -20,
    width: width,
    height: 20
  });
}

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // move ball
  ball.x += ball.dx;

  // draw ball
  ctx.fillStyle = "lime";
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
  ctx.fill();

  // obstacles
  ctx.fillStyle = "red";
  for (let i = 0; i < obstacles.length; i++) {
    obstacles[i].y += 6;
    ctx.fillRect(obstacles[i].x, obstacles[i].y, obstacles[i].width, obstacles[i].height);

    if (
      ball.x + ball.radius > obstacles[i].x &&
      ball.x - ball.radius < obstacles[i].x + obstacles[i].width &&
      ball.y + ball.radius > obstacles[i].y &&
      ball.y - ball.radius < obstacles[i].y + obstacles[i].height
    ) {
      alert("Game Over! Score: " + score);
      document.location.reload();
    }
  }

  score++;
  requestAnimationFrame(update);
}

setInterval(spawnObstacle, 1000);
update();
</script>

</body>
</html>
